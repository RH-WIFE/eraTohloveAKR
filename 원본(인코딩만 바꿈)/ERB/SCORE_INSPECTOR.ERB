;-------------------------------------------------
;評定関数　監査官プレイ用
;キャラの口上の、コマンド実行時のファイルで@SCORING_COM
;絶頂時のファイルで@SCORING_PALAMCNGを呼び出してください
;-------------------------------------------------
;-------------------------------------------------
;コマンド毎に呼び出す関数
;-------------------------------------------------
@SCORING_COM
#DIM DYNAMIC ADD_SCORE = 0


;汎用喘ぎ用のコマンド分類関数を使う
CALL COMMON_KOJO_EX
LOCAL = RESULT

;セックス関連だけ
;ＡかＶかを先に判定してLOCALの値を変更
IF LOCAL == 5
	SIF SEXPLAY(TARGET) == 1
		LOCAL = 2
	SIF SEXPLAY(TARGET) == 2
		LOCAL = 3
ENDIF

SELECTCASE LOCAL
	;Ｃ快感
	CASE 1
		SIF TALENT:Ｃ敏感
			ADD_SCORE += 1
		SIF TALENT:自慰狂い
			ADD_SCORE += 1
		
		IF ABL:Ｃ感覚 >= 8
			ADD_SCORE += 3
		ELSEIF ABL:Ｃ感覚 >= 5
			ADD_SCORE += 2
		ELSEIF ABL:Ｃ感覚 >= 3
			ADD_SCORE += 1
		ENDIF
	;Ｖ快感　Ｖセックス
	CASE 2
		SIF TALENT:Ｖ敏感
			ADD_SCORE += 1
		SIF TALENT:淫壺
			ADD_SCORE += 1
		
		IF ABL:Ｖ感覚 >= 8
			ADD_SCORE += 3
		ELSEIF ABL:Ｖ感覚 >= 5
			ADD_SCORE += 2
		ELSEIF ABL:Ｖ感覚 >= 3
			ADD_SCORE += 1
		ENDIF
	;Ａ快感　Ａセックス
	CASE 3
		SIF TALENT:Ａ敏感
			ADD_SCORE += 1
		SIF TALENT:尻穴狂い
			ADD_SCORE += 1
		
		IF ABL:Ａ感覚 >= 8
			ADD_SCORE += 3
		ELSEIF ABL:Ａ感覚 >= 5
			ADD_SCORE += 2
		ELSEIF ABL:Ａ感覚 >= 3
			ADD_SCORE += 1
		ENDIF
	;Ｂ快感
	CASE 4
		SIF TALENT:Ｂ敏感
			ADD_SCORE += 1
		SIF TALENT:陥没乳首
			ADD_SCORE += 1
		SIF TALENT:淫乳
			ADD_SCORE += 1
		
		IF ABL:Ｂ感覚 >= 8
			ADD_SCORE += 3
		ELSEIF ABL:Ｂ感覚 >= 5
			ADD_SCORE += 2
		ELSEIF ABL:Ｂ感覚 >= 3
			ADD_SCORE += 1
		ENDIF
	;羞恥
	CASE 7
		SIF TALENT:恥じらい
			ADD_SCORE += 1
		SIF TALENT:マゾ
			ADD_SCORE += 1
		
		IF ABL:マゾっ気 >= 8
			ADD_SCORE += 3
		ELSEIF ABL:マゾっ気 >= 5
			ADD_SCORE += 2
		ELSEIF ABL:マゾっ気 >= 3
			ADD_SCORE += 1
		ENDIF
	;加虐　苦痛快楽　屈辱
	CASE 8,10,17
		SIF TALENT:マゾ
			ADD_SCORE += 1
		SIF TALENT:プライド高い
			ADD_SCORE += 1
		
		IF ABL:マゾっ気 >= 8
			ADD_SCORE += 3
		ELSEIF ABL:マゾっ気 >= 5
			ADD_SCORE += 2
		ELSEIF ABL:マゾっ気 >= 3
			ADD_SCORE += 1
		ENDIF
	;奉仕快楽　奉仕
	CASE 9,20
		SIF TALENT:献身的
			ADD_SCORE += 1
		
		IF ABL:奉仕精神 >= 8
			ADD_SCORE += 3
		ELSEIF ABL:奉仕精神 >= 5
			ADD_SCORE += 2
		ELSEIF ABL:奉仕精神 >= 3
			ADD_SCORE += 1
		ENDIF
	;主人マゾ
	CASE 14
		SIF TALENT:サド
			ADD_SCORE += 1
		
		IF ABL:サドっ気 >= 8
			ADD_SCORE += 3
		ELSEIF ABL:サドっ気 >= 5
			ADD_SCORE += 2
		ELSEIF ABL:サドっ気 >= 3
			ADD_SCORE += 1
		ENDIF
	;スカ
	CASE 15
		IF ABL:スカ中毒 >= 5
			ADD_SCORE += 3
		ELSEIF ABL:スカ中毒 >= 4
			ADD_SCORE += 2
		ELSEIF ABL:スカ中毒 >= 3
			ADD_SCORE += 1
		ENDIF
ENDSELECT

;以下は細かい条件別
;緊縛
IF BIND_CHECK_A(TARGET)
	IF EXP:緊縛経験 >= EXPLV:5
		ADD_SCORE += 3
	ELSEIF EXP:緊縛経験 >= EXPLV:4
		ADD_SCORE += 2
	ELSEIF EXP:緊縛経験 >= EXPLV:3
		ADD_SCORE += 1
	ENDIF
ENDIF

;露出　羞恥　撮影　鑑賞
IF TEQUIP:ビデオカメラ || TEQUIP:野外プレイ || TEQUIP:羞恥プレイ || (SELECTCOM == 311 || SELECTCOM == 312)
	SIF TALENT:恥じらい
		ADD_SCORE += 1
	
	IF ABL:露出癖 >= 8
		ADD_SCORE += 3
	ELSEIF ABL:露出癖 >= 5
		ADD_SCORE += 2
	ELSEIF ABL:露出癖 >= 3
		ADD_SCORE += 1
	ENDIF
ENDIF

;セックス系　逆セックス系
SELECTCASE SELECTCOM
	CASE 100 TO 119,260 TO 265,430,431,506 TO 523,526
		SIF TALENT:セックス狂
			ADD_SCORE += 1
		SIF TALENT:貞操観念
			ADD_SCORE += 1
		
		
		IF ABL:セックス中毒 >= 8
			ADD_SCORE += 3
		ELSEIF ABL:セックス中毒 >= 5
			ADD_SCORE += 2
		ELSEIF ABL:セックス中毒 >= 3
			ADD_SCORE += 1
		ENDIF
ENDSELECT

SELECTCASE SELECTCOM
	;精液系
	CASE 71,72,75,86,87,410,412,420,503,504
		SIF TALENT:汚臭敏感
			CFLAG:506 += 1
		SIF TALENT:料理上手
			ADD_SCORE += 1
			
		IF ABL:精液中毒 >= 8
			ADD_SCORE += 3
		ELSEIF ABL:精液中毒 >= 5
			ADD_SCORE += 2
		ELSEIF ABL:精液中毒 >= 3
			ADD_SCORE += 1
		ENDIF
	;自慰系
	CASE 3 TO 8,509
		SIF TALENT:自慰しやすい
			ADD_SCORE += 1
		SIF  TALENT:自慰狂い
			ADD_SCORE += 1
		SIF TALENT:プライド高い
			ADD_SCORE += 1
		
		IF ABL:自慰中毒 >= 8
			ADD_SCORE += 3
		ELSEIF ABL:自慰中毒 >= 5
			ADD_SCORE += 2
		ELSEIF ABL:自慰中毒 >= 3
			ADD_SCORE += 1
		ENDIF
	;母乳系
	CASE 17,18
		SIF TALENT:母乳体質
			ADD_SCORE += 1
		SIF TALENT:母性
			ADD_SCORE += 1
		
		IF ABL:噴乳中毒 >= 8
			ADD_SCORE += 3
		ELSEIF ABL:噴乳中毒 >= 5
			ADD_SCORE += 2
		ELSEIF ABL:噴乳中毒 >= 3
			ADD_SCORE += 1
		ENDIF
ENDSELECT

;陥落素質別に加点（独断と偏見でざっくり分類）
SELECTCASE SELECTCOM
	;恋慕　親愛　調教者が思慕対象でない場合を含む
	;奉仕系　コミュニケーション系　イチャイチャしているコマンド
	CASE 0,1,70,71,73 TO 77,200 TO 207,317 TO 319
		SIF CFLAG:39 == 6 || CFLAG:39 == 165
			ADD_SCORE += 2
		SIF CFLAG:39 == 3
			ADD_SCORE += 1
	
	;淫乱　娼婦
	;Ｂ　Ｃ　Ｖ　Ａ　セックス系　気持ちいい系のコマンド
	CASE 10 TO 59,100 TO 119,500 TO 510
		SIF CFLAG:39 == 7
			ADD_SCORE += 2
		SIF CFLAG:39 == 4
			ADD_SCORE += 1
	
	;服従　隷属　調教者が思慕対象でない場合を含む
	;ＳＭ系　ハードな奉仕系　ハードなセックス系　とりあえずハードなコマンド
	CASE 80 TO 87,130 TO 162,380 TO 383,511 TO 514
		SIF CFLAG:39 == 8
			ADD_SCORE += 2
		SIF CFLAG:39 == 5
			ADD_SCORE += 1
	
ENDSELECT

RETURN ADD_SCORE

;-------------------------------------------------
;絶頂時などに呼び出す関数
;-------------------------------------------------
@SCORING_PALAMCNG
#DIM DYNAMIC ADD_SCORE

;今どれだけ絶頂しているか　CVAB　0～32？点が加点
ADD_SCORE += NOWEX:0 + NOWEX:1 + NOWEX:2 + NOWEX:3

;噴乳　射精　強制精飲絶頂　空射精　ドライオーガニズム
ADD_SCORE += NOWEX:4 + NOWEX:5 + NOWEX:13 + NOWEX:40 + NOWEX:41

;素質別で加点
;部位開発系素質があり　かつ　そこで絶頂　0～4点が加点
SIF TALENT:自慰狂い && NOWEX:0
	ADD_SCORE += 1

SIF TALENT:淫壺 && NOWEX:1
	ADD_SCORE += 1
	
SIF TALENT:尻穴狂い && NOWEX:2
	ADD_SCORE += 1

SIF TALENT:淫乳 && NOWEX:3
	ADD_SCORE += 1

;セックス狂はセックスでの絶頂で加点
SIF TALENT:セックス狂 && ((SEXPLAY(TARGET) == 1 && NOWEX:0 )|| (SEXPLAY(TARGET) == 2 && NOWEX:2) || (SEXPLAY(TARGET) > 2 && NOWEX:1))
	ADD_SCORE += 1

;即落ちはCVABのどこかで絶頂で加点
SIF TALENT:即落ち && (NOWEX:0 || NOWEX:1 || NOWEX:2 || NOWEX:3)
	ADD_SCORE += 1

;Ｖ敏感かつそこで絶頂で加点
SIF TALENT:Ｖ敏感 && NOWEX:0
	ADD_SCORE += 1

;Ｃ敏感かつそこで絶頂で加点
SIF TALENT:Ｃ敏感 && NOWEX:1
	ADD_SCORE += 1

;Ａ敏感かつそこで絶頂で加点
SIF TALENT:Ａ敏感 && NOWEX:2
	ADD_SCORE += 1

;Ｂ敏感かつそこで絶頂で加点
SIF TALENT:Ｂ敏感 && NOWEX:3
	ADD_SCORE += 1

;汚臭敏感かつ強制精飲絶頂で加点
SIF TALENT:汚臭敏感 && NOWEX:13
	ADD_SCORE += 1

;マゾかつ空射精かドライオーガニズムで加点　ドMならさらに加点
SIF TALENT:マゾ && (NOWEX:40 || NOWEX:41)
	ADD_SCORE += TALENT:マゾ

;母性かつ噴乳　もしくは　母性かつB絶頂で加点
SIF TALENT:母性 && (NOWEX:3 || NOWEX:4)
	ADD_SCORE += 1

;妊娠かつVAセックスでのVA絶頂で加点
SIF TALENT:妊娠 && ((SEXPLAY(TARGET) == 1 && NOWEX:0 )|| (SEXPLAY(TARGET) == 2 && NOWEX:2))
	ADD_SCORE += 1

;能力別条件
;今のところなし

;経験別条件
;その部位で初絶頂
SIF NOWEX:0 > 0 && CFLAG:241 == 0
	ADD_SCORE += NOWEX:0

SIF NOWEX:1 > 0 && CFLAG:242 == 0
	ADD_SCORE += NOWEX:1

SIF NOWEX:2 > 0 && CFLAG:243 == 0
	ADD_SCORE += NOWEX:2

SIF NOWEX:3 > 0 && CFLAG:244 == 0
	ADD_SCORE += NOWEX:3

RETURN ADD_SCORE

