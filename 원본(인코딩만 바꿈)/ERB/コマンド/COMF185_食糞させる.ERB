;-------------------------------------------------
;食糞させる
;スカ系コマンド
;-------------------------------------------------
@COM185

PRINTL 食糞させる
STR:0 = 食糞させる

;-------------------------------------------------
;特殊派生処理
;-------------------------------------------------
;地下室にいて、触手口辱中、尿意があって触手アナルしていると連結チューブ（大）
IF TEQUIP:地下室 && TEQUIP:触手口辱 && TEQUIP:アナルバイブ && BASE:便意 > 60
	CALL COM_ABLE527
	IF RESULT == 1
		TFLAG:56 = 2
		JUMP COM527
	ENDIF
ENDIF

;-------------------------------------------------
;実行判定処理
;-------------------------------------------------
;すべての命令に共通の要素を考慮
;(従順が高いと命令に従いやすいなど)
CALL COM_ORDER

;実行判定操作
CALL KOJO_DENIAL_PLUS

;合計を表示(60以上で実行)
PRINT  = 
PRINTV A

V = 60
SIF A < V
	PRINT  < 
SIF A == V
	PRINT  = 
SIF A > V
	PRINT  > 
PRINT 実行値
PRINTV V

;実行不可口上/実行判定操作
SIF A < V
	CALL KOJO_DENIAL

WAIT

;実行できない
SIF A < V
	RETURN 0

CALL KOJO_MESSAGE_COM


;-------------------------------------------------
;ソース追加処理
;-------------------------------------------------
;消費体力、気力
LOSEBASE:体力 += 10
LOSEBASE:気力 += 150

;屈従、不潔、逸脱、反発
SOURCE:屈従 += 2000
SOURCE:不潔 += 1500
SOURCE:逸脱 += 2000
SOURCE:反発 += 2000

;-------------------------------------------------
;特殊ソース処理
;-------------------------------------------------
;抑圧、抵抗持ちには、抑鬱ソース追加
SIF TALENT:抑圧 || TALENT:抵抗
	SOURCE:鬱屈 += 1500

;スカ中毒で中毒充足増、反発と消費気力減
IF ABL:スカ中毒 == 0
	TIMES SOURCE:逸脱 , 1.50
	LOSEBASE:気力 += 200
ELSEIF ABL:スカ中毒 == 1
	SOURCE:中毒充足 += 200
	TIMES SOURCE:逸脱 , 1.00
	LOSEBASE:気力 += 100
ELSEIF ABL:スカ中毒 == 2
	SOURCE:中毒充足 += 500
	TIMES SOURCE:逸脱 , 0.50
	LOSEBASE:気力 += 70
ELSEIF ABL:スカ中毒 == 3
	SOURCE:中毒充足 += 800
	TIMES SOURCE:逸脱 , 0.20
	LOSEBASE:気力 += 50
ELSEIF ABL:スカ中毒 == 4
	SOURCE:中毒充足 += 1000
	TIMES SOURCE:逸脱 , 0.10
	LOSEBASE:気力 += 20
ELSE
	SOURCE:中毒充足 += 2000
	TIMES SOURCE:逸脱 , 0.05
ENDIF

;-------------------------------------------------
;汚れの処理
;-------------------------------------------------
CALL COM_STAIN

;-------------------------------------------------
;経験の処理
;-------------------------------------------------
;食糞経験なければ異常経験
IF EXP:食糞経験 == 0
	EXP:異常経験 += 1
	PRINTL 食糞初経験で異常経験＋１
ENDIF
EXP:食糞経験 += 1

;ゲイ経験とか加算
CALL COM_EXP(1)

;初スカ経験のとき異常経験
IF EXP:スカ経験 == 0
	EXP:異常経験 += 1
	PRINTL スカトロ初経験で異常経験＋１
ENDIF
EXP:スカ経験 += 1
PRINTL スカ経験＋１

;調教者にスカ経験
IF EXP:PLAYER:スカ経験 == 0
	EXP:PLAYER:異常経験 += 1
	PRINTFORML スカトロ初経験で%CALLNAME:PLAYER%に異常経験＋１
ENDIF
EXP:PLAYER:スカ経験 += 1
PRINTFORML %CALLNAME:PLAYER%にスカ経験＋１

;スカ中毒４以上なら全部食べる
SIF ABL:スカ中毒 >= 4
	TFLAG:57 = 0

;依存度ベクトル
TFLAG:33 = 5

;依存度補正値(服従で1、隷属で2）
IF TALENT:服従 && ASSIPLAY == 0
	TFLAG:30 += 1
ELSEIF TALENT:隷属 && ASSIPLAY == 0
	TFLAG:30 += 2
ENDIF


RETURN 1

