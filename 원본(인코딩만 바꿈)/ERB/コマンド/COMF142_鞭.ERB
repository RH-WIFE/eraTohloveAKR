;-------------------------------------------------
;鞭で打つ
;ＳＭ系コマンド
;-------------------------------------------------
@COM142

PRINTL 鞭で打つ
STR:0 = 鞭で打つ
CALL KOJO_MESSAGE_COM

;-------------------------------------------------
;ソース追加処理
;-------------------------------------------------
IF TFLAG:56 == 1
	IF TEQUIP:地下室
		;消費体力、気力
		LOSEBASE:体力 += 125
		LOSEBASE:気力 += 80
		
		SOURCE:痛み += 6000
	ELSE
		;消費体力、気力
		LOSEBASE:体力 += 100
		LOSEBASE:気力 += 50
		
		SOURCE:痛み += 4000
	ENDIF
	SOURCE:快Ｃ += 100
ELSEIF TFLAG:56 == 2
	IF TEQUIP:地下室
		;消費体力、気力
		LOSEBASE:体力 += 100
		LOSEBASE:気力 += 50
		
		SOURCE:痛み += 3500
	ELSE
		;消費体力、気力
		LOSEBASE:体力 += 75
		LOSEBASE:気力 += 35
		
		SOURCE:痛み += 1500
	ENDIF
	SOURCE:快Ｂ += 100
ELSE
	IF TEQUIP:地下室
		;消費体力、気力
		LOSEBASE:体力 += 75
		LOSEBASE:気力 += 35
		
		SOURCE:痛み += 1500
	ELSE
		;消費体力、気力
		LOSEBASE:体力 += 50
		LOSEBASE:気力 += 20
		
		SOURCE:痛み += 1000
	ENDIF
ENDIF

;着衣のとき、服によって痛み軽減
IF TFLAG:56 == 1
	IF BOTTOMS(TARGET) >= 4
		TIMES SOURCE:痛み , 0.70
		TIMES SOURCE:快Ｃ , 0.70
	ELSEIF TEQUIP:下着（下） && TEQUIP:下着（下） != 5
		TIMES SOURCE:痛み , 0.90
		TIMES SOURCE:快Ｃ , 0.90
	ENDIF
ELSEIF TFLAG:56 == 2
	IF TOPS(TARGET) > 1
		TIMES SOURCE:痛み , 0.70
		TIMES SOURCE:快Ｂ , 0.70
	ELSEIF TEQUIP:下着（上）
		TIMES SOURCE:痛み , 0.90
		TIMES SOURCE:快Ｂ , 0.90
	ENDIF
ELSE
	IF TEQUIP:全身上着 || TEQUIP:上衣 || TEQUIP:下衣
		TIMES SOURCE:痛み , 0.70
	ELSEIF TEQUIP:下着（上） || (TEQUIP:下着（下） && TEQUIP:下着（下） != 5)
		TIMES SOURCE:痛み , 0.90
	ENDIF
ENDIF

SOURCE:恐れ += 1000
;地下室にいると恐れのソース追加
SIF TEQUIP:地下室
	TIMES SOURCE:恐れ , 1.50

SOURCE:逸脱 += 100
SOURCE:反発 += 600


;-------------------------------------------------
;特殊ソース処理
;-------------------------------------------------
;苦痛のパラメータによる苦痛のソース増加は先に処理しておく
IF PALAM:苦痛 < PALAMLV:1
	TIMES SOURCE:痛み , 1.00
ELSEIF PALAM:苦痛 < PALAMLV:2
	TIMES SOURCE:痛み , 1.50
ELSEIF PALAM:苦痛 < PALAMLV:3
	TIMES SOURCE:痛み , 2.00
ELSEIF PALAM:苦痛 < PALAMLV:4
	TIMES SOURCE:痛み , 2.50
ELSEIF PALAM:苦痛 >= PALAMLV:4
	TIMES SOURCE:痛み , 3.00
ENDIF

;-------------------------------------------------
;経験の処理
;-------------------------------------------------
;ゲイ経験とか加算
CALL COM_EXP(2)

;依存度ベクトル
TFLAG:33 = 3

;依存度補正値(服従で1、隷属で2）
IF TALENT:服従 && ASSIPLAY == 0
	TFLAG:30 += 1
ELSEIF TALENT:隷属 && ASSIPLAY == 0
	TFLAG:30 += 2
ENDIF


RETURN 1




