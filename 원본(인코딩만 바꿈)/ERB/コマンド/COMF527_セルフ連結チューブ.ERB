;-------------------------------------------------
;セルフ連結チューブ
;派生系コマンド
;-------------------------------------------------
@COM527

PRINTL セルフ連結チューブ
STR:0 = セルフ連結チューブ

SELECTCOM = 527

CALL KOJO_MESSAGE_COM

;-------------------------------------------------
;ソース追加処理
;-------------------------------------------------
IF TFLAG:56 == 1
	;消費体力、気力
	LOSEBASE:体力 += 50
	LOSEBASE:気力 += 300
	
	;性行動、露出、屈服、不潔、逸脱、反感
	SOURCE:屈従 += 2500
	SOURCE:不潔 += 1000
	SOURCE:逸脱 += 1800
	SOURCE:反発 += 1500
	
	;抑圧、抵抗持ちには、抑鬱ソース追加
	SIF TALENT:抑圧 || TALENT:抵抗
		SOURCE:鬱屈 += 1000
ELSEIF TFLAG:56 == 2
	;消費体力、気力
	LOSEBASE:体力 += 20
	LOSEBASE:気力 += 600
	
	;屈従、不潔、逸脱、反発
	SOURCE:屈従 += 3000
	SOURCE:不潔 += 1500
	SOURCE:逸脱 += 2500
	SOURCE:反発 += 2500
	
	;抑圧、抵抗持ちには、抑鬱ソース追加
	SIF TALENT:抑圧 || TALENT:抵抗
		SOURCE:鬱屈 += 1500
ENDIF


;-------------------------------------------------
;特殊ソース処理
;-------------------------------------------------
IF TFLAG:56 == 1
	;マゾっ気を見る
	IF ABL:マゾっ気 == 0
		TIMES SOURCE:屈従 , 0.80
		SOURCE:中毒充足 += 0
		SOURCE:欲情 += 0
	ELSEIF ABL:マゾっ気 == 1
		TIMES SOURCE:屈従 , 1.00
		SOURCE:中毒充足 += 20
		SOURCE:欲情 += 30
	ELSEIF ABL:マゾっ気 == 2
		TIMES SOURCE:屈従 , 1.20
		SOURCE:中毒充足 += 40
		SOURCE:欲情 += 70
	ELSEIF ABL:マゾっ気 == 3
		TIMES SOURCE:屈従 , 1.40
		SOURCE:中毒充足 += 70
		SOURCE:欲情 += 120
	ELSEIF ABL:マゾっ気 == 4
		TIMES SOURCE:屈従 , 1.50
		SOURCE:中毒充足 += 110
		SOURCE:欲情 += 180
	ELSEIF ABL:マゾっ気 == 5
		TIMES SOURCE:屈従 , 1.70
		SOURCE:中毒充足 += 150
		SOURCE:欲情 += 250
	ELSEIF ABL:マゾっ気 == 6
		TIMES SOURCE:屈従 , 1.90
		SOURCE:中毒充足 += 200
		SOURCE:欲情 += 300
	ELSEIF ABL:マゾっ気 == 7
		TIMES SOURCE:屈従 , 2.10
		SOURCE:中毒充足 += 250
		SOURCE:欲情 += 350
	ELSEIF ABL:マゾっ気 == 8
		TIMES SOURCE:屈従 , 2.30
		SOURCE:中毒充足 += 300
		SOURCE:欲情 += 400
	ELSEIF ABL:マゾっ気 == 9
		TIMES SOURCE:屈従 , 2.50
		SOURCE:中毒充足 += 350
		SOURCE:欲情 += 450
	ELSEIF ABL:マゾっ気 >= 10
		TIMES SOURCE:屈従 , 3.00
		SOURCE:中毒充足 += 500
		SOURCE:欲情 += 500
	ENDIF

	;マゾを見る
	IF TALENT:マゾ
		TIMES SOURCE:欲情 , 1.50
		TIMES SOURCE:反発 , 0.80
	ENDIF
ELSEIF TFLAG:56 == 2
	;スカ中毒で中毒充足増、反発と消費気力減
	IF ABL:スカ中毒 == 0
		TIMES SOURCE:逸脱 , 1.50
		LOSEBASE:気力 += 200
	ELSEIF ABL:スカ中毒 == 1
		SOURCE:中毒充足 += 200
		TIMES SOURCE:逸脱 , 1.00
		LOSEBASE:気力 += 100
	ELSEIF ABL:スカ中毒 == 2
		SOURCE:中毒充足 += 500
		TIMES SOURCE:逸脱 , 0.50
		LOSEBASE:気力 += 70
	ELSEIF ABL:スカ中毒 == 3
		SOURCE:中毒充足 += 800
		TIMES SOURCE:逸脱 , 0.20
		LOSEBASE:気力 += 50
	ELSEIF ABL:スカ中毒 == 4
		SOURCE:中毒充足 += 1000
		TIMES SOURCE:逸脱 , 0.10
		LOSEBASE:気力 += 20
	ELSE
		SOURCE:中毒充足 += 2000
		TIMES SOURCE:逸脱 , 0.05
	ENDIF
ENDIF


;-------------------------------------------------
;汚れの処理
;-------------------------------------------------
IF TFLAG:56 == 1
	;調教対象の口に尿汚れ
	STAIN:口 |= 128
ELSEIF TFLAG:56 == 2
	;調教対象の口に便汚れ
	STAIN:口 |= 512
ENDIF


;-------------------------------------------------
;経験の処理
;-------------------------------------------------
;スカ経験を伴う調教による異常経験
IF EXP:スカ経験 == 0
	EXP:異常経験 += 1
	PRINTL スカトロ初経験で異常経験＋１
ENDIF
EXP:スカ経験 += 1
PRINTL スカ経験＋１

IF TFLAG:56 == 1
	EXP:飲尿経験 += 1
	PRINTFORML %CALLNAME%に飲尿経験＋１
	BASE:尿意 = 0
ELSEIF TFLAG:56 == 2
	EXP:食糞経験 += 1
	PRINTFORML %CALLNAME%に食糞経験＋１
	BASE:便意 = 0
ENDIF

;依存度ベクトル
TFLAG:33 = 5

;依存度補正値(服従で1、隷属で2）
IF TALENT:服従 && ASSIPLAY == 0
	TFLAG:30 += 1
ELSEIF TALENT:隷属 && ASSIPLAY == 0
	TFLAG:30 += 2
ENDIF

RETURN 1


